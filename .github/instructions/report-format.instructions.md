# レポートフォーマットガイドライン

このドキュメントは、エージェントが生成するレポートのフォーマットを定義します。

---

## 📋 共通ヘッダー

すべてのレポートは以下のヘッダーから始める：

```markdown
# {レポートタイトル}

**生成日時**: {YYYY-MM-DD HH:mm:ss JST}  
**対象期間**: {開始日} 〜 {終了日}  
**生成元**: {エージェント名}  
**リポジトリ**: {owner}/{repo}
```

---

## 🎨 バッジとアイコン

### ステータスバッジ

| 状態   | バッジ           |
| ------ | ---------------- |
| 成功   | `✅` または `🟢` |
| 警告   | `⚠️` または `🟡` |
| エラー | `❌` または `🔴` |
| 情報   | `ℹ️` または `🔵` |

### リスクレベルバッジ

| レベル   | 表示          |
| -------- | ------------- |
| Critical | `🔴 Critical` |
| High     | `🟠 High`     |
| Medium   | `🟡 Medium`   |
| Low      | `🟢 Low`      |

### 傾向アイコン

| 傾向   | アイコン |
| ------ | -------- |
| 改善   | `📈`     |
| 悪化   | `📉`     |
| 横ばい | `➡️`     |

---

## 📊 サマリーセクション

レポートの最初に概要を記載：

```markdown
## 📊 サマリー

| 指標     | 値   | 傾向           |
| -------- | ---- | -------------- |
| {指標 1} | {値} | {傾向アイコン} |
| {指標 2} | {値} | {傾向アイコン} |
```

---

## 📋 詳細セクション

### テーブル形式

```markdown
## 📋 詳細

| 項目     | 状態 | 備考   |
| -------- | ---- | ------ |
| {項目 1} | ✅   | {備考} |
| {項目 2} | ⚠️   | {備考} |
```

### リスト形式

```markdown
## 📋 詳細

### ✅ 正常

- {項目 1}
- {項目 2}

### ⚠️ 警告

- {項目 3}: {理由}
- {項目 4}: {理由}
```

---

## ⚠️ 警告・推奨セクション

```markdown
## ⚠️ 警告事項

> **{警告タイトル}**  
> {警告の詳細説明}

## 💡 推奨アクション

1. **{アクション 1}**: {説明}
2. **{アクション 2}**: {説明}
```

---

## 📈 トレンドセクション

```markdown
## 📈 トレンド

| 期間 | 値   | 変化            |
| ---- | ---- | --------------- |
| 先週 | {値} | -               |
| 今週 | {値} | {+/-差分} ({%}) |
```

---

## 📎 フッター

```markdown
---

<details>
<summary>📎 メタデータ</summary>

- **レポートバージョン**: 1.0
- **生成エージェント**: {agent_name}
- **実行 ID**: {workflow_run_id}
- **所要時間**: {duration}

</details>
```

---

## 🎯 レポート別テンプレート

### 環境レポート

```markdown
# 🌐 環境レポート

## 📊 サマリー

| リソース | 正常 | 異常 |
| -------- | ---- | ---- |
| 合計     | {n}  | {m}  |

## 🖥️ リソース状態

### AKS: {status_badge}

- ノード数: {count}
- バージョン: {version}
  ...
```

### コストレポート

```markdown
# 💰 コストレポート

## 📊 サマリー

- **期間内合計**: ¥{total}
- **日平均**: ¥{daily_avg}
- **傾向**: {trend_icon}

## 📊 リソース別内訳

| リソース | コスト | 割合 |
| -------- | ------ | ---- |

...
```

### セキュリティレポート

```markdown
# 🔐 セキュリティ監査レポート

## 📊 セキュリティスコア: {score}/100 {score_badge}

## 🔍 検出結果

| 重要度   | 件数 |
| -------- | ---- |
| Critical | {n}  |
| High     | {n}  |

...
```

### ワークフローヘルスレポート

```markdown
# 🔄 ワークフロー健全性レポート

## 📊 サマリー

- **成功率**: {rate}% {trend_icon}
- **平均実行時間**: {duration}

## 📋 ワークフロー別

| ワークフロー | 成功率 | 実行数 |
| ------------ | ------ | ------ |

...
```

### デプロイ差分レポート

```markdown
# 🔄 デプロイ差分レポート

## リスクレベル: {risk_badge}

## 📊 変更サマリー

| 操作    | 件数 |
| ------- | ---- |
| ➕ 作成 | {n}  |
| 📝 変更 | {n}  |
| ❌ 削除 | {n}  |

## ⚠️ 警告

{warnings}
```

---

## 📁 出力先

| 出力先      | 形式     | パス                         |
| ----------- | -------- | ---------------------------- |
| ファイル    | Markdown | `reports/{type}/{date}.md`   |
| ファイル    | JSON     | `reports/{type}/{date}.json` |
| Issue       | Markdown | GitHub Issue                 |
| Job Summary | Markdown | `$GITHUB_STEP_SUMMARY`       |
